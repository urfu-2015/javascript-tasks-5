# Задача к лекции «This / Bind / Call / Apply» – «Пора на лекцию»

:sos: [Как создать Pull Request](https://github.com/urfu-2015/guides/blob/master/how-to-pull-request.md)  
:warning: При создании PullRequest'а не забудьте указать ваши имя и фамилию.

### Общие требования

Мы очень хотим, чтобы код вы написали сами, а __не пользовались внешними библиотеками__.

Прежде чем отправлять решение, проверьте его на соответствие [общим требованиям](https://github.com/urfu-2015/guides/blob/master/js-codestyle.md).

Когда вы создадите или обновите пулл-реквест, он автоматически будет проверен
на соответствие кодстайлу и базовую работоспособность. Результаты вы увидите внизу:

Если всё хорошо:  
<img width="308" alt="2015-10-08_1845" src="https://cloud.githubusercontent.com/assets/4534405/10368030/ccc43228-6dec-11e5-925e-47793862d13e.png">

Если всё плохо:  
<img width="218" alt="2015-10-08_1841" src="https://cloud.githubusercontent.com/assets/4534405/10367916/60487fc8-6dec-11e5-9e1d-2a1b15da2220.png">

Проверить можно и вручную:

```js
// Устанавливаем проверяльщик
npm install

// Проверяем
npm test

// В результате выведутся ошибки, если они есть
// Если какие-либо ошибки будут непонятны – смело спрашиваем у ментора
```

### Задача

От вечеринок и мальчишников возвращаемся в мрачные стены университета ­— время слушать лекцию.

В файле `index.js` вас ждут студенты, готовые внимать каждому слову преподавателя:

```js
var daria = {
    focus: 5
};

lecturer.on('begin', daria, function () {
    this.focus += 1;
});
```

Студента можно подписать на событие, производимое преподавателем (например, начало лекции или показ нового слайда) — то есть указать, какая функция должна быть вызвана при наступлении этого события.

Ваша задача — реализовать несколько методов:

* подписка на событие — `on`
* отписка от события — `off`
* вызов события — `emit`

```js
var getEmitter = require('./emitter');
var lecturer = getEmitter();

// подписываем студента daria на событие slide
lecturer.on('slide', daria, function () {
    console.log('Новый слайд!');
});

// вызываем событие slide
lecturer.emit('slide'); // 'Новый слайд!'

// отписываем студента daria от события slide
lecturer.off('slide', daria);

// вызываем событие slide
lecturer.emit('slide'); // обработчик не выполнился
```

Чтобы задания не казалось совсем простым, вам также нужно реализовать поддержку пространства имён.

```js
lecturer.on('slide', daria, function () {
    console.log('Новый слайд!');
});

lecturer.on('slide.funny', daria, function () {
    console.log('Новый смешной слайд!');
});

lecturer.emit('slide'); // 'Новый слайд!'

lecturer.emit('slide.funny'); // 'Новый смешной слайд!'
                              // 'Новый слайд!'

lecturer.emit('slide.text'); // 'Новый слайд!'
```

Подробности вас ждут в файле __index.js__.

### Необязательное задание

Необходимо реализовать два дополнительных метода эмиттера. Оба метода работают аналогично `on`, но обладают некоторыми особенностями.

#### `several` — вызывает обработчик события n раз

```js
lecturer.several('slide', daria, function () {
    console.log('Новый слайд!');
}, 2); // обработчик должен выполнится только дважды

lecturer.emit('slide'); // 'Новый слайд!'
lecturer.emit('slide'); // 'Новый слайд!'
lecturer.emit('slide'); // обработчик не выполнился
```

#### `through` — вызывает обработчик события каждый n-й раз

```js
lecturer.through('slide', daria, function () {
    console.log('Новый слайд!');
}, 2); // обработчик должен выполниться на второй, четвёртый, шестой (и так далее) раз

lecturer.emit('slide'); // обработчик не выполнился
lecturer.emit('slide'); // 'Новый слайд!'
lecturer.emit('slide'); // обработчик не выполнился
lecturer.emit('slide'); // 'Новый слайд!'
lecturer.emit('slide'); // обработчик не выполнился
lecturer.emit('slide'); // 'Новый слайд!'
```

![](http://i.imgur.com/R3soz.jpg)
